---
title: 函数
sidebar:
    order: 10
---

## 字符串函数

| 函数                         | 功能                                                                                  |
| ---------------------------- | ------------------------------------------------------------------------------------- |
| `CONCAT(s1, s2, ...sn)`      | 字符串拼接                                                                            |
| `LOWER(str)`                 | 将字符串内容转换为小写                                                                |
| `UPPER(str)`                 | 将字符串内容转换为大写                                                                |
| `LPAD(str, n, pad)`          | 左填充，用字符串 `pad` 对 `str` 的左边进行填充<br/>达到n个字符串长度                  |
| `RPAD(str, n, pad)`          | 右填充，用字符串 `pad` 对 `str` 的右边进行填充<br/>达到n个字符串长度                  |
| `TRIM(str)`                  | 去除字符串左右空格                                                                    |
| `SUBSTRING(str, start, len)` | 返回字符串 `str` 从 `start` 位置开始<br/>（包含start位置的字符）的 `len` 长度的字符串 |

## 数值函数

| 函数          | 功能                                       |
| ------------- | ------------------------------------------ |
| `CEIL(x)`     | 向上取整                                   |
| `FLOOR(x)`    | 向下取整                                   |
| `MOD(x, y)`   | 返回 `x` 除 `y` 的模                       |
| `RAND()`      | 返回 0~1 内的随机数                        |
| `ROUND(x, y)` | 求参数 `x` 的四舍五入的值，保留 `y` 位小数 |

## 日期函数

| 函数                                                         | 功能                                                        |
| ------------------------------------------------------------ | ----------------------------------------------------------- |
| `CURDATE()`                                                  | 返回当前日期                                                |
| `CURTIME()`                                                  | 返回当前时间                                                |
| `NOW()`                                                      | 返回当前日期和时间                                          |
| `YEAR(date)`                                                 | 获取指定 `date` 的年份                                      |
| `MONTH(date)`                                                | 获取指定 `date` 的月份                                      |
| `DAY(date)`                                                  | 获取指定 `date` 的日期                                      |
| `HOUR(date)`                                                 | 获取指定 `date` 的小时                                      |
| `MINUTE(date)`                                               | 获取指定 `date` 的分钟                                      |
| `SECOND(date)`                                               | 获取指定 `date` 的秒数                                      |
| <code>[DATE_ADD(date, interval expr type)](#date_add)</code> | 返回一个日期或时间值加上<br/>一个时间间隔 `expr` 后的时间值 |
| <code>[DATEDIFF(date1, date2)](#datediff)</code>             | 返回起始时间 `date1` 和<br />结束时间 `date2` 之间的天数    |

### `DATE_ADD()`

```sql
-- 当前日期加1天
SELECT DATE_ADD(NOW(), INTERVAL 1 DAY);

-- 当前日期减2天
SELECT DATE_ADD(NOW(), INTERVAL -2 DAY);

-- 当前时间加5个小时
SELECT DATE_ADD(NOW(), INTERVAL 5 HOUR);

-- 当前时间加30分钟
SELECT DATE_ADD(NOW(), INTERVAL 30 MINUTE);

-- 当前时间减15分钟
SELECT DATE_ADD(NOW(), INTERVAL -15 MINUTE);
```

### `DATEDIFF()`

```sql
-- 获取当前时间和5天后的天数差
SELECT DATEDIFF(NOW(), DATE_ADD(NOW(), INTERVAL 5 DAY))
-- 结果为-5
```

## 流程控制函数

| 函数                                                           | 功能                                                                       |
| -------------------------------------------------------------- | -------------------------------------------------------------------------- |
| `IF(value, t, f)`                                              | 如果 `value` 为 true，则返回 `t`，否则返回 `f`                             |
| `IFNULL(value1, value2)`                                       | 如果 `value1` 不为空则返回 `value1`，否则返回 `value2`                     |
| `CASE WHEN [val1] THEN [res1] ...ELSE [defaultVal] END`        | 如果 `val1` 为 true，返回 `res1`，...否则返回 `defaultVal` 默认值          |
| `CASE [expr] WHEN [val1] THEN [res1] ...ELSE [defaultVal] END` | 如果 `expr` 的值等于 `val1`，返回 `res1` ，...否则返回 `defaultVal` 默认值 |

### `CASE-WHEN-THEN-ELSE-END`

```sql
-- 根据城市进行分类
SELECT name,
(CASE address WHEN '北京' THEN '一线城市' WHEN '上海' THEN '一线城市' ELSE '二线城市' END) AS home_city
FROM employee
```

## 其他函数

| 函数        | 功能                             |
| ----------- | -------------------------------- |
| `USER()`    | 查看当前用户                     |
| `VERSION()` | 查询 `MySQL` 版本                |
| `MD5(str)`  | 返回 `str` 进行 `md5` 后的字符串 |
| `UUID()`    | 获取 `uuid` 字符串               |

```sql
-- 查询自增的步长
select @@auto_increment_increment;
```
