---
title: 存储函数
sidebar:
    order: 40
---

存储函数是有返回值的存储过程，存储函数的参数只能是 IN 类型的（所有IN关键字可以不写）

```sql
/*
characteristic说明：
    DETERMINISTIC：相同的输入参数总是产生相同的结果
    NO SQL：不不包含SQL语句
    READS SQL DATA：包含读取数据的语句，但不包含写入数据的语句
*/
CREATE FUNCTION 存储函数名([参数列表])
RETURNS type [characteristic ...]
BEGIN
    -- SQL语句
    RETURN ...;
END
```

使用

```sql {3}
-- 定义
CREATE FUNCTION fun1(num int)
RETURNS int DETERMINISTIC
BEGIN
    DECLARE total INT DEFAULT 0;
    WHILE num > 0 DO
        SET total := total + num;
        SET num := num - 1;
    END WHILE;
    RETURN total;
END

-- 使用
SELECT fun1(100);
```
