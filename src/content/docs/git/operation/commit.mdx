---
title: 提交
sidebar:
    order: 0
---

import { Steps } from "@astrojs/starlight/components";

## 第一次提交

<Steps>
1. 创建一个本地仓库

    ```bash
    mkdir example-commit
    cd example-commit

    git init
    ```

2. 使用编辑器新建一个文件 `a.txt`，并添加以下内容

    ```txt
    123456
    ```

3. 使用 `git add` 命令将文件添加到**暂存区**

    ```bash
    git add a.txt

    # 也可以使用这个命令将当前工作区内的所有文件都添加暂存区
    git add .
    ```

4. 使用 `git status` 命令查看文件状态信息，如果添加成功，一般会显示绿色的 `new file: a.txt`

    ```bash
    git status
    ```

5. 使用 `git commit` 命令将**暂存区**内的文件提交到本地仓库，使用 `-m` 选项添加提交信息

    ```bash
    git commit -m 'A: add a.txt file'
    ```

6. 使用 `git log` 查看仓库内的提交记录，使用 `-p` 选项查看提交的文件内容

    ```bash
    git log -p
    ```

</Steps>

## 交互式暂存文件（--patch）

<Steps>

1. 准备仓库

    ```bash
    mkdir example-interactive-add
    cd example-interactive-add

    git init
    echo 'apple' > fruits.md
    echo 'banana' >> fruits.md
    echo 'orange' >> fruits.md
    echo 'watermelon' >> fruits.md
    git add . && git commit -m 'A: add fruits'
    ```

2. 删除 banana 和 watermelon

    ```diff lang="txt" title="fruits.md"
    apple
    - banana
    orange
    - watermelon
    ```

3. 执行操作，只删除 watermelon

    ```bash
    # 开始交互式暂存
    git add -p fruits.md

    # 进入交互式命令后输入 s 分离成更小的 hunk
    # 再输入 j 跳转到下一个 hunk
    # 此时显示删除了 watermelon 输入 y 再输入 q 退出
    ```

    - `y` - 暂存这块 hunk
    - `n` - 不暂存这块 hunk
    - `s` - 将这块 hunk 分离成更小的 hunk
        - `j` - 下一个 hunk
        - `J` - 上一个 hunk
    - `e` - 打开编辑器手动修改 hunk
        - 不暂存则删除某个 hunk
        - 修改完成保存退出即可

</Steps>
